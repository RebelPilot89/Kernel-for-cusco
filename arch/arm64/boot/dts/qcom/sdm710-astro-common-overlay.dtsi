/* Copyright (c) 2019, The Linux Foundation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include <dt-bindings/clock/qcom,gcc-sdm845.h>
#include <dt-bindings/clock/qcom,camcc-sdm845.h>
#include <dt-bindings/clock/qcom,dispcc-sdm845.h>
#include <dt-bindings/clock/qcom,rpmh.h>
#include <dt-bindings/interrupt-controller/arm-gic.h>
#include <dt-bindings/input/input.h>

#include "sdm710-moto-common-overlay-base.dtsi"
#include "sdm710-astro-display.dtsi"
#include "sdm710-astro-sensor-overlay.dtsi"
#include "sdm710-astro-fingerprint.dtsi"

&utags {
	compatible = "mmi,utags";
	mmi,main-utags = "/dev/block/bootdevice/by-name/utags";
	mmi,backup-utags = "/dev/block/bootdevice/by-name/utagsBackup";
};

&hw {
	compatible = "mmi,utags";
	mmi,dir-name = "hw";
	mmi,main-utags = "/dev/block/bootdevice/by-name/hw";
};

&reserved_memory {
	ramoops_mem {
		compatible = "ramoops";
		no-map;
		reg = <0x0 0xaf000000 0x0 0xc0000>;
		console-size = <0x40000>;
		pmsg-size = <0x40000>;
		record-size = <0x3f800>;
	};

	tzlog_dump_mem: tzlog_dump_mem_region {
		no-map;
		reg = <0x0 0xaefd0000 0x0 0x30000>;
	};

	mmi_annotate_mem: mmi_annotate_mem_region {
		no-map;
		reg = <0x0 0xaefcf800 0x0 0x800>;
	};

	wdog_cpuctx_mem: wdog_cpuctx_region {
		no-map;
		reg = <0x0 0xaefa1800 0x0 (0x5c00 * 8)>;
	};
};

&sde_dp {
	status = "disabled";
};

&mdss_mdp {
	connectors = <&sde_rscc &sde_wb>;
};

&tlmm {
       /* Pinctrl setting for assist key */
	assist_key {
		gpio_key_default: gpio_key_default {
			mux {
				pins = "gpio40";
				function = "gpio";
			};
			config {
				pins = "gpio40";
				drive-strength = <2>;
				bias-pull-up;
			};
		};
	};
};

&soc {
        gpio_keys {
                compatible = "gpio-keys";
                label = "gpio-keys";

                pinctrl-names = "default";
                pinctrl-0 = <&gpio_key_default
				&key_vol_up_default>;

                assist_key {
                        label = "assist_key";
                        gpios = <&tlmm 40 GPIO_ACTIVE_LOW>;
                        linux,input-type = <1>;
                        linux,code = <KEY_SEARCH>;
                        gpio-key,wakeup;
                        debounce-interval = <15>;
                        linux,cddan-disable;
                };
        };
};

&usb_qmp_dp_phy {
	status = "disabled";
};

&usb0 {
	dwc3@a600000 {
		usb-phy = <&qusb_phy0>, <&usb_nop_phy>;
		maximum-speed = "high-speed";
	};
};

&pm660_haptics {
        qcom,vmax-mv = <3000>;
        qcom,ilim-ma = <400>;
        qcom,wave-play-rate-us = <20000>;
        qcom,actuator-type = <1>;
        status = "okay";
};

&red_led {
	status = "ok";
	linux,name = "charging";
};

&green_led {
	status = "disabled";
};

&blue_led {
	status = "disabled";
};

&vendor {
        mot_batterydata: qcom,battery-data {
                df-serialnum = "SB18C28956";
                #include "batterydata-jk50-scud.dtsi"
        };
};

&pm660_0 {
	pm660_mmi: qcom,qpnp-smb2-mmi {
		status = "ok";
		compatible = "qcom,qpnp-smbcharger-mmi";
		qcom,pmic-revid = <&pm660_revid>;
		qcom,enable-charging-limit;
		qcom,upper-limit-capacity = <75>;
		qcom,lower-limit-capacity = <60>;
		qcom,mmi-temp-zones = <0 4200 1000 0>,
				<15 0 1000 1000>,
				<45 0 3000 3000>,
				<60 4200 2500 0>;
		qcom,iterm-ma = <150>;
		qcom,vfloat-comp-uv = <20000>;
		qcom,force-hvdcp-5v;
	};
};

&pm660_fg {
        qcom,battery-data = <&mot_batterydata>;
        qcom,fg-force-load-profile = <1>;
        qcom,fg-cutoff-voltage = <3400>;
        qcom,fg-empty-voltage = <3200>;
};

&pm660_charger {
	qcom,float-option = <1>;
	qcom,auto-recharge-soc = <99>;
	qcom,dcp-current-ua = <2000000>;
};
